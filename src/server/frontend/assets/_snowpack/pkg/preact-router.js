import{A as b,B as O,_ as S,v as x}from"./common/preact.module-87ab60fc.js";var W={};function L(t,e){for(var n in e)t[n]=e[n];return t}function M(t,e,n){var r=/(?:\?([^#]*))?(#.*)?$/,i=t.match(r),l={},a;if(i&&i[1])for(var u=i[1].split("&"),f=0;f<u.length;f++){var h=u[f].split("=");l[decodeURIComponent(h[0])]=decodeURIComponent(h.slice(1).join("="))}t=v(t.replace(r,"")),e=v(e||"");for(var d=Math.max(t.length,e.length),c=0;c<d;c++)if(e[c]&&e[c].charAt(0)===":"){var k=e[c].replace(/(^:|[+*?]+$)/g,""),g=(e[c].match(/[+*?]+$/)||W)[0]||"",R=~g.indexOf("+"),U=~g.indexOf("*"),C=t[c]||"";if(!C&&!U&&(g.indexOf("?")<0||R)){a=!1;break}if(l[k]=decodeURIComponent(C),R||U){l[k]=t.slice(c).map(decodeURIComponent).join("/");break}}else if(e[c]!==t[c]){a=!1;break}return n.default!==!0&&a===!1?!1:l}function _(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:t.index-e.index}function D(t,e){return t.index=e,t.rank=P(t),t.props}function v(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function j(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}function N(t){return v(t).map(j).join("")}function P(t){return t.props.default?0:N(t.props.path)}var o=null,p=[],m=[],z={};function B(t,e){e===void 0&&(e="push"),o&&o[e]?o[e](t):typeof history!="undefined"&&history[e+"State"]&&history[e+"State"](null,null,t)}function y(){var t;return o&&o.location?t=o.location:o&&o.getCurrentLocation?t=o.getCurrentLocation():t=typeof location!="undefined"?location:z,""+(t.pathname||"")+(t.search||"")}function A(t,e){return e===void 0&&(e=!1),typeof t!="string"&&t.url&&(e=t.replace,t=t.url),F(t)&&B(t,e?"replace":"push"),T(t)}function F(t){for(var e=p.length;e--;)if(p[e].canRoute(t))return!0;return!1}function T(t){for(var e=!1,n=0;n<p.length;n++)p[n].routeTo(t)===!0&&(e=!0);for(var r=m.length;r--;)m[r](t);return e}function K(t){if(!(!t||!t.getAttribute)){var e=t.getAttribute("href"),n=t.getAttribute("target");if(!(!e||!e.match(/^\//g)||n&&!n.match(/^_?self$/i)))return A(e)}}function H(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0))return K(t.currentTarget||t.target||this),E(t)}function E(t){return t&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()),!1}function Y(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button!==0)){var e=t.target;do if(String(e.nodeName).toUpperCase()==="A"&&e.getAttribute("href")){if(e.hasAttribute("native"))return;if(K(e))return E(t)}while(e=e.parentNode)}}var I=!1;function V(){I||(typeof addEventListener=="function"&&(o||addEventListener("popstate",function(){T(y())}),addEventListener("click",Y)),I=!0)}var s=function(t){function e(n){t.call(this,n),n.history&&(o=n.history),this.state={url:n.url||y()},V()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldComponentUpdate=function(r){return r.static!==!0?!0:r.url!==this.props.url||r.onChange!==this.props.onChange},e.prototype.canRoute=function(r){var i=b(this.props.children);return this.getMatchingChildren(i,r,!1).length>0},e.prototype.routeTo=function(r){this.setState({url:r});var i=this.canRoute(r);return this.updating||this.forceUpdate(),i},e.prototype.componentWillMount=function(){p.push(this),this.updating=!0},e.prototype.componentDidMount=function(){var r=this;o&&(this.unlisten=o.listen(function(i){r.routeTo(""+(i.pathname||"")+(i.search||""))})),this.updating=!1},e.prototype.componentWillUnmount=function(){typeof this.unlisten=="function"&&this.unlisten(),p.splice(p.indexOf(this),1)},e.prototype.componentWillUpdate=function(){this.updating=!0},e.prototype.componentDidUpdate=function(){this.updating=!1},e.prototype.getMatchingChildren=function(r,i,l){return r.filter(D).sort(_).map(function(a){var u=M(i,a.props.path,a.props);if(u){if(l!==!1){var f={url:i,matches:u};return L(f,u),delete f.ref,delete f.key,O(a,f)}return a}}).filter(Boolean)},e.prototype.render=function(r,i){var l=r.children,a=r.onChange,u=i.url,f=this.getMatchingChildren(b(l),u,!0),h=f[0]||null,d=this.previousUrl;return u!==d&&(this.previousUrl=u,typeof a=="function"&&a({router:this,url:u,previous:d,active:f,current:h})),h},e}(S),q=function(t){return x("a",L({onClick:H},t))},G=function(t){return x(t.component,t)};s.subscribers=m,s.getCurrentUrl=y,s.route=A,s.Router=s,s.Route=G,s.Link=q,s.exec=M;export default s;
