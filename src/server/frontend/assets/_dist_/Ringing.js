import{useEffect as k,useState as a}from"../_snowpack/pkg/preact/compat.js";import{h as t}from"../_snowpack/pkg/preact.js";import"./Ringing.css.proxy.js";import{Client as N}from"./adapter/Client.js";const _=({doorbell_id:c})=>{const[m,r]=a(t("p",null,"loading snapshot...")),[s,i]=a(""),[l,g]=a([]),e="No Reaction",p=async()=>{const n=await N.configure();r(t("img",{src:`${n.apiEndpoint}/snapshot/${c}`,alt:"Snapshot"}));const u=(await n.messageTemplates()).templates.map((o,b)=>t("button",{key:b,className:"button blue block",onClick:()=>{n.setMessage(c,o),i(o)}},o));g(u)};return k(()=>{l.length===0&&p().catch(console.error)},[]),t("div",{className:"Ringing"},t("h1",{className:"Ringing__title"},"Someone At The Door"),t("div",{className:"Ringing__snapshot"},m),(()=>s===""?t("div",{className:"Ringing__buttons"},l,t("button",{className:"button red block",onClick:()=>i(e)},e)):s===e?t("div",{className:"Ringing__buttons"},t("button",{className:"button red block active"},s)):t("div",{className:"Ringing__buttons"},t("button",{className:"button blue block active"},s)))())};export{_ as Ringing};
